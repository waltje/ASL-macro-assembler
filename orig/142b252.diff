*** ../src.142b252/asmsub.c	Sat Sep 23 07:27:52 2023
--- asmsub.c	Thu Oct 19 21:18:06 2023
***************
*** 1639,1644 ****
--- 1639,1687 ----
  #endif
  }
  
+ #elif _MSC_VER || defined(__TINYC__)
+ 
+ # define GetPath GetPathWin32
+ # include <windows.h>
+ # include <stdint.h>
+ 
+ # ifdef __TINYC__
+ struct timeval {
+     long tv_sec;
+     long tv_usec;
+ };
+ #endif
+ 
+ 
+ static int gettimeofday(struct timeval * tp, struct timezone * tzp)
+ {
+     // Note: some broken versions only have 8 trailing zero's, the correct epoch has 9 trailing zero's
+     // This magic number is the number of 100 nanosecond intervals since January 1, 1601 (UTC)
+     // until 00:00:00 January 1, 1970 
+     static const uint64_t EPOCH = ((uint64_t) 116444736000000000ULL);
+ 
+     SYSTEMTIME  system_time;
+     FILETIME    file_time;
+     uint64_t    time;
+ 
+     GetSystemTime( &system_time );
+     SystemTimeToFileTime( &system_time, &file_time );
+     time =  ((uint64_t)file_time.dwLowDateTime )      ;
+     time += ((uint64_t)file_time.dwHighDateTime) << 32;
+ 
+     tp->tv_sec  = (long) ((time - EPOCH) / 10000000L);
+     tp->tv_usec = (long) (system_time.wMilliseconds * 1000);
+     return 0;
+ }
+ 
+ long GTime(void)
+ {
+   struct timeval tv;
+ 
+   gettimeofday(&tv, NULL);
+   return (tv.tv_sec*100) + (tv.tv_usec/10000);
+ }
+ 
  #else
  
  #include <sys/time.h>
*** ../src.142b252/codescmp.c	Mon Oct 03 11:38:27 2022
--- codescmp.c	Mon Oct 30 19:59:59 2023
***************
*** 97,107 ****
        }
        if (!as_strcasecmp(Left.str.p_str, "E"))
          BAsmCode[1] = 0x80;
-       else if (*Arg == 0)
-       {
-         WrStrErrorPos(ErrNum_InvReg, &Right);
-         return False;
-       }
        else
        {
          BAsmCode[1] = EvalStrIntExpression(&Left, SInt8, &OK);
--- 97,102 ----
***************
*** 110,116 ****
        }
        return True;
      }
!     else pArg->str.p_str[l - 1] = ')';
    }
  
    /* no carry in PC from bit 11 to 12; additionally handle preincrement */
--- 105,117 ----
        }
        return True;
      }
!     else
!     {
! // FIXME: what is this for?
! //   else pArg->str.p_str[l - 1] = ')';
!       WrStrErrorPos(ErrNum_InvReg, &Right);
!       return False;
!     }
    }
  
    /* no carry in PC from bit 11 to 12; additionally handle preincrement */
*** ../src.142b252/Makefile	Sun Oct 29 15:49:38 2023
--- Makefile	Mon Oct 30 16:24:29 2023
***************
*** 80,86 ****
  	$(LD) $(EOBJ)$(MKDEPENDTARGET) $(MKDEPEND_OBJECTS) $(LDFLAGS)
  
  check_targ_cc:
! 	@if test "$(TARG_CC)" = ""; then echo "TARG_CC is not set - please review Makefile.def"; exit 1; fi; exit 0
  
  #---------------------------------------------------------------------------
  # special rules for objects dependant on string resource files
--- 80,86 ----
  	$(LD) $(EOBJ)$(MKDEPENDTARGET) $(MKDEPEND_OBJECTS) $(LDFLAGS)
  
  check_targ_cc:
! #	@if test "$(TARG_CC)" = ""; then echo "TARG_CC is not set - please review Makefile.def"; exit 1; fi; exit 0
  
  #---------------------------------------------------------------------------
  # special rules for objects dependant on string resource files
*** ../src.142b252/Makefile.def-samples/Makefile.def-MSVC	Wed Dec 31 19:00:00 1969
--- Makefile.def-samples/Makefile.def-MSVC	Mon Oct 30 16:50:08 2023
***************
*** 0 ****
--- 1,43 ----
+ # -------------------------------------------------------------------------
+ # choose your compiler (must be ANSI-compliant!) and linker command, plus
+ # any additionally needed flags.  Also set target directory and file extensions:
+ #
+ # Makefile.def for using Visual Studio on Windows.
+ 
+ 
+ # ...for host-side build tools:
+ 
+ RM	= del /q
+ OBJDIR	=
+ CC	= cl /nologo
+ CFLAGS	= /O2
+ OOBJ	= /Fo
+ LD	= cl /nologo
+ LDFLAGS	=
+ EOBJ	= /Fe
+ HOST_OBJEXTENSION = .obj
+ HOST_EXEXTENSION = .exe
+ LIBM	=
+ 
+ TARG_OOBJ=$(OOBJ)
+ TARG_EOBJ=$(EOBJ)
+ 
+ # ...for the actual build targets.  This is the simple case for no cross-build:
+ 
+ TARG_OBJDIR = $(OBJDIR)
+ TARG_CC = $(CC)
+ TARG_CFLAGS = $(CFLAGS)
+ TARG_OBJEXTENSION = $(HOST_OBJEXTENSION)
+ TARG_LD = $(LD)
+ TARG_LDFLAGS = $(LDFLAGS)
+ TARG_EXEXTENSION = $(HOST_EXEXTENSION)
+ 
+ # -------------------------------------------------------------------------
+ # directories where binaries, includes, and manpages should go during
+ # installation
+ 
+ BINDIR = C:/ASL/bin
+ INCDIR = C:/ASL/include
+ MANDIR = C:/ASL/man
+ LIBDIR =
+ DOCDIR = C:/ASL/doc
*** ../src.142b252/Makefile.def-samples/Makefile.def-tinyc	Wed Dec 31 19:00:00 1969
--- Makefile.def-samples/Makefile.def-tinyc	Mon Oct 30 16:26:25 2023
***************
*** 0 ****
--- 1,35 ----
+ # -------------------------------------------------------------------------
+ #
+ # choose your compiler (must be ANSI-compliant!) and linker command, plus
+ # any additionally needed flags
+ #
+ # Makefile.def for TinyC running on Windows.
+ 
+ 
+ # ...for host-side build tools:
+ CC	= tcc
+ OBJDIR	=
+ CFLAGS	= -O2 -Wall 
+ LIBM	=
+ LD	= $(CC)
+ LDFLAGS	=
+ HOST_OBJEXTENSION = .o
+ HOST_EXEXTENSION = .exe
+ 
+ TARG_CC = $(CC)
+ TARG_OBJDIR = $(OBJDIR)
+ TARG_CFLAGS = $(CFLAGS)
+ TARG_LD = $(LD)
+ TARG_LDFLAGS = $(LDFLAGS)
+ TARG_OBJEXTENSION = .o
+ TARG_EXEXTENSION = $(HOST_EXEXTENSION)
+ 
+ # -------------------------------------------------------------------------
+ # directories where binaries, includes, and manpages should go during
+ # installation
+ 
+ BINDIR = C:/ASL/bin
+ INCDIR = C:/ASL/include
+ MANDIR = C:/ASL/man
+ LIBDIR =
+ DOCDIR = C:/ASL/doc
*** ../src.142b252/Makefile.def-samples/Makefile.def-x86-msys2-mingw	Wed Dec 31 19:00:00 1969
--- Makefile.def-samples/Makefile.def-x86-msys2-mingw	Mon Oct 30 16:31:38 2023
***************
*** 0 ****
--- 1,32 ----
+ # -------------------------------------------------------------------------
+ # choose your compiler (must be ANSI-compliant!) and linker command, plus
+ # any additionally needed flags
+ 
+ 
+ # ...for host-side build tools:
+ CC = gcc
+ OBJDIR =
+ CFLAGS = -O2 -Wall 
+ LIBM =
+ HOST_OBJEXTENSION = .o
+ LD = $(CC)
+ LDFLAGS =
+ HOST_EXEXTENSION = .exe
+ 
+ TARG_CC = $(CC)
+ TARG_OBJDIR = $(OBJDIR)
+ TARG_CFLAGS = $(CFLAGS)
+ TARG_OBJEXTENSION = .o
+ TARG_LD = $(LD)
+ TARG_LDFLAGS = $(LDFLAGS)
+ TARG_EXEXTENSION = $(HOST_EXEXTENSION)
+ 
+ # -------------------------------------------------------------------------
+ # directories where binaries, includes, and manpages should go during
+ # installation
+ 
+ BINDIR = C:/ASL/bin
+ INCDIR = C:/ASL/include
+ MANDIR = C:/ASL/man
+ LIBDIR =
+ DOCDIR = C:/ASL/doc
*** ../src.142b252/mkdepend.c	Wed Jun 28 15:17:12 2023
--- mkdepend.c	Thu Oct 19 16:54:59 2023
***************
*** 6,12 ****
  #include <errno.h>
  #include <sys/types.h>
  #include <sys/stat.h>
! #include <unistd.h>
  
  #include "strutil.h"
  #include "stringlists.h"
--- 6,14 ----
  #include <errno.h>
  #include <sys/types.h>
  #include <sys/stat.h>
! #ifndef _WIN32
! # include <unistd.h>
! #endif
  
  #include "strutil.h"
  #include "stringlists.h"
*** ../src.142b252/nls.c	Mon Apr 17 12:43:46 2023
--- nls.c	Thu Oct 19 20:33:29 2023
***************
*** 8,13 ****
--- 8,17 ----
  /*                                                                           */
  /*****************************************************************************/
  
+ #ifdef _MSC_VER
+ # include <windows.h>
+ #endif
+ 
  #undef DEBUG_NLS
  
  #include "stdinc.h"
*** ../src.142b252/README	Wed Feb 17 12:04:28 2021
--- README	Mon Oct 30 17:00:51 2023
***************
*** 8,14 ****
  
  LICENSING
  
! AS is based upon the Gnu General Public License (GPL); read the file
  COPYING for its details.  You should have received a copy of this file
  together with AS; if not, someone sneaked in!
  
--- 8,14 ----
  
  LICENSING
  
! AS is based upon the GNU General Public License (GPL); read the file
  COPYING for its details.  You should have received a copy of this file
  together with AS; if not, someone sneaked in!
  
***************
*** 34,39 ****
--- 34,51 ----
  - Solaris 2.5/Sparc with Sun-C 3.0.1
  - IBM RS/6000 AIX 4.1 with IBM XLC 
  
+ Additionally, you can now build and run AS on Windows, using
+ 
+ - Microsoft Visual Studio (2019 and up tested)
+ - MSYS2:MinGW-64 (GCC 13.1.0 [and up] tested)
+ - TinyC (I use this a lot, and it builds fine with it)
+ 
+ and it seems to run fine on Windows XP (32b), Windows 7 (32/64b),
+ Windows 8.1 (ARM), Windows 10/11 (x64 and ARM64.) The Windows ARM
+ binaries had to be signed, of course, and soon, so will the Windows
+ 11 ones have to be.  See README.MSVC for instructions.
+ 
+ 
  DIFFERENCES / THINGS TO DO
  
  The portable C version of AS has the following, known differences to
***************
*** 83,85 ****
--- 95,99 ----
  FEEDBACK
  
  In case of problems or questions, send them to alfred@ccac.rwth-aachen.de .
+ 
+ For questions regarding this version/repo, contact waltje@varcem.com instead!
*** ../src.142b252/README.MSVC	Wed Dec 31 19:00:00 1969
--- README.MSVC	Mon Oct 30 16:59:23 2023
***************
*** 0 ****
--- 1,27 ----
+ This code can now be built for Windows using Microsoft Visual Studio.
+ 
+ The build process is not fully finished yet, because we still need to
+ manually remove old files - no recursive "rm" available and all that.
+ 
+ So, for now:
+ 
+ 1.  Make sure all previous EXE,OBJ,DEP,MSH and .RSC files are gone.
+ 
+ 2.  Copy the file Makefile.def-samples/Makefile.def-MSVC to Makefile.def
+ 
+ 3.  Run Make or NMake:
+ 
+        nmake
+ 
+     and it will build all EXE files for you.
+ 
+ 4.  Note that the default ASL installation folder is set to C:\ASL ; you
+     can change this in the Makefile.def file, at the bottom.
+ 
+ Tested with Microsoft Visual Studio 2019 and up, on x86, x64, arm and arm64
+ platforms.
+ 
+ I will remove the (1) limitation as soon as I feel less lazy ;-)
+ 
+ Fred N. van Kempen, <waltje@varcem.com>
+ Last updated: 2023/10/30
*** ../src.142b252/stdhandl.c	Thu Jun 22 16:03:33 2023
--- stdhandl.c	Thu Oct 19 20:34:39 2023
***************
*** 118,125 ****
--- 118,127 ----
    fstat(NumStdOut, &stdout_stat);
    if (S_ISREG(stdout_stat.st_mode))
      Redirected = RedirToFile;
+ #ifdef S_ISFIFO
    else if (S_ISFIFO(stdout_stat.st_mode))
      Redirected = RedirToDevice;
+ #endif
    else
      Redirected = NoRedir;
  
*** ../src.142b252/stdinc.h	Thu Jun 22 16:03:33 2023
--- stdinc.h	Thu Oct 19 19:19:37 2023
***************
*** 18,24 ****
  #ifndef __MUNIX__
  #include <stdlib.h>
  #endif
! #if !defined ( __MSDOS__ ) && !defined( __IBMC__ )
  #include <unistd.h>
  #endif
  #include <math.h>
--- 18,24 ----
  #ifndef __MUNIX__
  #include <stdlib.h>
  #endif
! #if !defined ( __MSDOS__ ) && !defined( __IBMC__ ) && !defined(_WIN32)
  #include <unistd.h>
  #endif
  #include <math.h>
*** ../src.142b252/strutil.h	Wed Dec 29 06:27:29 2021
--- strutil.h	Thu Oct 19 19:59:28 2023
***************
*** 13,18 ****
--- 13,21 ----
  #include <stdio.h>
  #include <stddef.h>
  #include <stdarg.h>
+ #ifdef _WIN32
+ # include <string.h>
+ #endif
  
  #include "datatypes.h"
  
*** ../src.142b252/sysdefs.h	Sun Dec 04 11:57:07 2022
--- sysdefs.h	Mon Oct 30 15:58:45 2023
***************
*** 1,5 ****
  #ifndef _SYSDEFS_H
! #define _SYSDEFS_H
  /* sysdefs.h */
  /*****************************************************************************/
  /* SPDX-License-Identifier: GPL-2.0-only OR GPL-3.0-only                     */
--- 1,5 ----
  #ifndef _SYSDEFS_H
! # define _SYSDEFS_H
  /* sysdefs.h */
  /*****************************************************************************/
  /* SPDX-License-Identifier: GPL-2.0-only OR GPL-3.0-only                     */
***************
*** 21,39 ****
   *
   */
  
  /*---------------------------------------------------------------------------*/
  /* unify 68K platforms */
  
  #ifdef __mc68020
! #ifndef __m68k
! #define __m68k
! #endif
  #endif
  
  #ifdef m68000
! #ifndef __m68k
! #define __m68k
! #endif
  #endif
  
  #ifdef __mc68000
--- 21,123 ----
   *
   */
  
+ #ifdef _MSC_VER
+ # define __PROTOS__
+ # define UNUSED(x) (void)x
+ 
+ /*
+  * Windows systems using Microsoft Visual Studio.
+  */
+ # ifdef _M_ARM
+ #  define ARCHPRNAME "arm"
+ # endif
+ # ifdef _M_ARM64
+ #  define ARCHPRNAME "arm64"
+ # endif
+ # ifdef _M_IX86
+ #  define ARCHPRNAME "x86"
+ # endif
+ # ifdef _M_X64
+ #  define ARCHPRNAME "x64"
+ # endif
+ 
+ # define ARCHSYSNAME "windows-msvc"
+ 
+ # define DEFSMADE
+ # define OPENRDMODE "rb"
+ # define OPENWRMODE "wb"
+ # define OPENUPMODE "rb+"
+ # define IEEEFLOAT
+ # define SLASHARGS
+ # define PATHSEP '\\'
+ # define SPATHSEP "\\"
+ # define DIRSEP ';'
+ # define SDIRSEP ";"
+ # define DRSEP ':'
+ # define SDRSEP ":"
+ # define NULLDEV "NUL"
+ typedef signed char Integ8;
+ typedef unsigned char Card8;
+ typedef signed short Integ16;
+ typedef unsigned short Card16;
+ # define HAS16
+ typedef signed int Integ32;
+ # define PRIInteg32 "d"
+ typedef unsigned int Card32;
+ # ifndef NOLONGLONG
+ typedef signed long long Integ64;
+ typedef unsigned long long Card64;
+ #  define HAS64
+ # endif
+ # define W32_NLS
+ #endif
+ 
+ 
+ /*===========================================================================*/
+ /* Intel i386 platforms */
+ 
+ #ifdef __i386
+ # define ARCHPRNAME "i386"
+ 
+ /*---------------------------------------------------------------------------*/
+ /* Intel i386 with NetBSD 1. and GCC: (tested on 1.5.3)
+ 
+    principally, a normal 32-bit UNIX */
+ 
+ #ifdef __NetBSD__
+ #define ARCHSYSNAME "i386-netbsd"
+ #define DEFSMADE
+ #define OPENRDMODE "r"
+ #define OPENWRMODE "w"
+ #define OPENUPMODE "r+"
+ #define IEEEFLOAT
+ typedef signed char Integ8;
+ typedef unsigned char Card8;
+ typedef signed short Integ16;
+ typedef unsigned short Card16;
+ #define HAS16
+ typedef signed int Integ32;
+ #define PRIInteg32 "d"
+ typedef unsigned int Card32;
+ typedef signed long long Integ64;
+ typedef unsigned long long Card64;
+ #define HAS64
+ #define LOCALE_NLS
+ #endif
+ 
  /*---------------------------------------------------------------------------*/
  /* unify 68K platforms */
  
  #ifdef __mc68020
! # ifndef __m68k
! #  define __m68k
! # endif
  #endif
  
  #ifdef m68000
! # ifndef __m68k
! #  define __m68k
! # endif
  #endif
  
  #ifdef __mc68000
***************
*** 48,88 ****
  /* MSDOS only runs on x86s... */
  
  #ifdef __MSDOS__
! #define __i386
  #endif
  
  /* For IBMC... */
  
  #ifdef _M_I386
! #define __i386
  #endif
  
  #ifdef __i386__
! #ifndef __i386
! #define __i386
! #endif
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* ditto for VAX platforms */
  
  #ifdef vax
! #define __vax__
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* ditto for PPC platforms */
  
  #ifdef __PPC
! #ifndef _POWER
! #define _POWER
! #endif
  #endif
  
  #ifdef __ppc__
! #ifndef _POWER
! #define _POWER
! #endif
  #endif
  
  #ifdef __PPC__
--- 132,172 ----
  /* MSDOS only runs on x86s... */
  
  #ifdef __MSDOS__
! # define __i386
  #endif
  
  /* For IBMC... */
  
  #ifdef _M_I386
! # define __i386
  #endif
  
  #ifdef __i386__
! # ifndef __i386
! #  define __i386
! # endif
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* ditto for VAX platforms */
  
  #ifdef vax
! # define __vax__
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* ditto for PPC platforms */
  
  #ifdef __PPC
! # ifndef _POWER
! #  define _POWER
! # endif
  #endif
  
  #ifdef __ppc__
! # ifndef _POWER
! #  define _POWER
! # endif
  #endif
  
  #ifdef __PPC__
***************
*** 101,128 ****
  /* ditto for ARM platforms */
  
  #ifdef __arm__
! #ifndef __arm
! #define __arm
! #endif
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* If the compiler claims to be ANSI, we surely can use prototypes */
  
  #ifdef __STDC__
! #define __PROTOS__
! #define UNUSED(x) (void)x
  #else
! #define UNUSED(x) {}
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* just a hack to allow distinguishing SunOS from Solaris on Sparcs... */
  
  #ifdef sparc
! #ifndef __sparc
! #define __sparc
! #endif
  #endif
  
  #ifdef __sparc
--- 185,212 ----
  /* ditto for ARM platforms */
  
  #ifdef __arm__
! # ifndef __arm
! #  define __arm
! # endif
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* If the compiler claims to be ANSI, we surely can use prototypes */
  
  #ifdef __STDC__
! # define __PROTOS__
! # define UNUSED(x) (void)x
  #else
! # define UNUSED(x) {}
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* just a hack to allow distinguishing SunOS from Solaris on Sparcs... */
  
  #ifdef sparc
! # ifndef __sparc
! #  define __sparc
! # endif
  #endif
  
  #ifdef __sparc
***************
*** 140,161 ****
  #endif /* __sparc */
  
  #ifdef __sparc__
! #ifndef __sparc
! #define __sparc
! #endif
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* similar on Sun 3's... */
  
  #ifdef __m68k
! #ifndef __NetBSD__
! #ifndef __MUNIX__
! #ifndef __amiga
! #define __sunos__
! #endif
! #endif
! #endif
  #endif
  
  /*===========================================================================*/
--- 224,245 ----
  #endif /* __sparc */
  
  #ifdef __sparc__
! # ifndef __sparc
! #  define __sparc
! # endif
  #endif
  
  /*---------------------------------------------------------------------------*/
  /* similar on Sun 3's... */
  
  #ifdef __m68k
! # ifndef __NetBSD__
! #  ifndef __MUNIX__
! #   ifndef __amiga
! #    define __sunos__
! #   endif
! #  endif
! # endif
  #endif
  
  /*===========================================================================*/
***************
*** 903,941 ****
  
  #endif /* __alpha */
  
- /*===========================================================================*/
- /* Intel i386 platforms */
- 
- #ifdef __i386
- 
- #define ARCHPRNAME "i386"
- 
- /*---------------------------------------------------------------------------*/
- /* Intel i386 with NetBSD 1. and GCC: (tested on 1.5.3)
- 
-    principally, a normal 32-bit UNIX */
- 
- #ifdef __NetBSD__
- #define ARCHSYSNAME "i386-netbsd"
- #define DEFSMADE
- #define OPENRDMODE "r"
- #define OPENWRMODE "w"
- #define OPENUPMODE "r+"
- #define IEEEFLOAT
- typedef signed char Integ8;
- typedef unsigned char Card8;
- typedef signed short Integ16;
- typedef unsigned short Card16;
- #define HAS16
- typedef signed int Integ32;
- #define PRIInteg32 "d"
- typedef unsigned int Card32;
- typedef signed long long Integ64;
- typedef unsigned long long Card64;
- #define HAS64
- #define LOCALE_NLS
- #endif
- 
  /*---------------------------------------------------------------------------*/
  /* Intel i386 with Linux and GCC:
  
--- 987,992 ----
***************
*** 1023,1041 ****
  #endif
  
  /*---------------------------------------------------------------------------*/
! /* Intel i386 with WIN32 and Cygnus GCC:
  
     well, not really a UNIX... */
  
  #ifdef _WIN32
- 
  /* no long long data type if C89 is used */
- 
  #if (defined __STDC__) && (!defined __STDC_VERSION__)
  # define NOLONGLONG
  #endif
  
  #define ARCHSYSNAME "unknown-win32"
  #define DEFSMADE
  #define OPENRDMODE "rb"
  #define OPENWRMODE "wb"
--- 1074,1091 ----
  #endif
  
  /*---------------------------------------------------------------------------*/
! /* Intel i386 with Windows and Cygnus GCC:
  
     well, not really a UNIX... */
  
  #ifdef _WIN32
  /* no long long data type if C89 is used */
  #if (defined __STDC__) && (!defined __STDC_VERSION__)
  # define NOLONGLONG
  #endif
  
  #define ARCHSYSNAME "unknown-win32"
+ 
  #define DEFSMADE
  #define OPENRDMODE "rb"
  #define OPENWRMODE "wb"
***************
*** 1371,1388 ****
  
  
  #ifdef DEFSMADE
! #ifndef PATHSEP
! #define PATHSEP '/'
! #define SPATHSEP "/"
! #define DIRSEP ':'
! #define SDIRSEP ":"
! #endif
! #ifndef NULLDEV
! #define NULLDEV "/dev/null"
! #endif
  #else
! #error "your platform so far is not included in AS's header files!"
! #error "please edit sysdefs.h!"
  #endif
  
  #ifdef CKMALLOC
--- 1421,1438 ----
  
  
  #ifdef DEFSMADE
! # ifndef PATHSEP
! #  define PATHSEP '/'
! #  define SPATHSEP "/"
! #  define DIRSEP ':'
! #  define SDIRSEP ":"
! # endif
! # ifndef NULLDEV
! #  define NULLDEV "/dev/null"
! # endif
  #else
! # error "your platform so far is not included in AS's header files!"
! # error "please edit sysdefs.h!"
  #endif
  
  #ifdef CKMALLOC
*** ../src.142b252/TODO	Wed Feb 17 12:04:28 2021
--- TODO	Mon Oct 30 17:01:16 2023
***************
*** 9,11 ****
--- 9,12 ----
  - IsDef liefert Dekoder
  - Entschüsselung AttrPart über strchr()
  
+ - fix the "const" warnings in WARNINGS.
*** ../src.142b252/WARNINGS	Wed Dec 31 19:00:00 1969
--- WARNINGS	Mon Oct 30 16:48:13 2023
***************
*** 0 ****
--- 1,7 ----
+ code6816.c(1070): warning C4090: 'function': different 'const' qualifiers
+ codem16.c(2920): warning C4090: 'function': different 'const' qualifiers
+ codem16.c(3068): warning C4090: 'function': different 'const' qualifiers
+ code97c241.c(2295): warning C4090: 'function': different 'const' qualifiers
+ code97c241.c(2466): warning C4090: 'function': different 'const' qualifiers
+ code3203x.c(1597): warning C4090: 'function': different 'const' qualifiers
+ code3203x.c(1821): warning C4090: 'function': different 'const' qualifiers
